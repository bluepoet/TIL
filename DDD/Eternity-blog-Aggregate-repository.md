# AGGREGATE와 REPOSITORY 1부

일반적으로 REFERENCE OBJECT는 독립적인 클래스로 표기하는 반면, VALUE OBJECT는 클래스의 속성으로 표기한다.

**좋은 모델이란 충분한 정보를 다루면서도 세부 사항에 집착하지 않고 핵심 주제를 효과적으로 전달하는 모델이다.** 주문 도메인의 핵심 주제는 도메인을 구성하는 고객(Customer), 주문(Order), 주문 항목(OrderLineItem), 상품(Product)이라는 개념과 이들 간의 상호 관계이다. 상대적으로 중요도가 낮은 금액(Money)을 프로퍼티로 표현함으로써 경제적이면서도 의미 전달이 명확한 모델을 만들 수 있다.

양방향 연과 관계는 도메인 모델 간의 결합도를 높이고 관계 간의 일관성을 유지하기 위해 필요한 구현 복잡도를 증가시키기 때문에 가능하다면 양방향 연관 관계를 사용하지 않는 것이 좋다.

나아가 고객 객체에게 한도액 검증 책임을 할당하는 것은 기능에 대한 욕심(Feature Envy)이라는   아주 고약한 냄새가 난다. 기능에 대한 욕심(Feature Envy)은 메소드가 자신의 내용보다 다른 클래스의 내용에 더 관심을 가질 경우 나타나는 코드 속의 나쁜 냄새로, 결과적으로 고객 객체가 자신이 몰라도 상관없는 주문의 상세 정보까지 눈독을 들임으로써 객체 간의 결합도가 높아지는 문제를 낳는다. 이것은 정보를 가지고 있는 클래스에 책임을 할당하라는 INFORMATIN EXPERT 패턴에 위반된다.

이처럼 변경에 대한 불변식을 유지하기 위해 하나의 단위로 취급되면서 변경의 빈도가 비슷하고, 동시 접근에 대한 잠금의 단위가 되는 객체의 집합을 AGGREGATE라고 한다.